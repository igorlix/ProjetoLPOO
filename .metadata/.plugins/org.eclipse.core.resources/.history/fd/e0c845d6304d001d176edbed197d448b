package controle;

import javax.swing.*;

import modelos.blocos;

public class movimento 
{
	//velocidade do movimento dos blocos//
    public static final int movimento = 1;
    public static int fps = blocos.WIDTH;

    public static void movimentoBlocos(blocos blocos, blocos espacoVazio, JPanel painel) 
    {
        String direcao = detectMovementDirection(blocos, espacoVazio);

        int posicaoX = blocos.getX();
        int posicaoY = blocos.getY();

        switch (direcao) 
        {
            case "Esquerda":
                new Thread(() -> 
                {
                    for (int i = 0; i < fps; i++) 
                    {
                        try 
                        {
                            Thread.sleep(movimento);
                        } catch (InterruptedException e) 
                        {
                            e.printStackTrace();
                        }
                        blocos.setX(blocos.getX() - 1);
                        moveespacoVazio(espacoVazio, posicaoX, posicaoY);
                        painel.repaint();
                    }
                }
                ).start();
                break;
            case "Direita":
                new Thread(() -> 
                {
                    for (int i = 0; i < fps; i++) 
                    {
                        try 
                        {
                            Thread.sleep(movimento);
                        } catch (InterruptedException e) 
                        {
                            e.printStackTrace();
                        }
                        blocos.setX(blocos.getX() + blocos.WIDTH / fps);
                        moveespacoVazio(espacoVazio, posicaoX, posicaoY);
                        painel.repaint();
                    }
                }
                ).start();
                break;
            case "Cima":
                new Thread(() -> 
                {
                    for (int i = 0; i < fps; i++) 
                    {
                        try 
                        {
                            Thread.sleep(movimento);
                        } catch (InterruptedException e) 
                        {
                            e.printStackTrace();
                        }
                        moveespacoVazio(espacoVazio, posicaoX, posicaoY);
                        blocos.setY(blocos.getY() - blocos.HEIGHT / fps);
                        painel.repaint();
                    }
                }
                ).start();
                break;
            case "Baixo":
                new Thread(() -> {
                    for (int i = 0; i < fps; i++) {
                        try {
                            Thread.sleep(movimento);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        blocos.setY(blocos.getY() + blocos.HEIGHT / fps);
                        moveespacoVazio(espacoVazio, posicaoX, posicaoY);
                        painel.repaint();
                    }
                }
                ).start();
                break;
        }
    }

    private static void moveespacoVazio(blocos espacoVazio, int posicaoX, int posicaoY) 
    {
        espacoVazio.setX(posicaoX);
        espacoVazio.setY(posicaoY);
    }

    public static String detectMovementDirection(blocos blocos, blocos espacoVazio) 
    {

        if (blocos.getX() > espacoVazio.getX() && blocos.getY() == espacoVazio.getY())
            return "LEFT";

        if (blocos.getX() < espacoVazio.getX() && blocos.getY() == espacoVazio.getY())
            return "RIGHT";

        if (blocos.getY() > espacoVazio.getY() && blocos.getX() == espacoVazio.getX())
            return "UP";

        if (blocos.getY() < espacoVazio.getY() && blocos.getX() == espacoVazio.getX())
            return "DOWN";

        return "UNKNOWN";
    }

}